{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/BEDegree/5th-Sem/CC/PetAdopt/lib/config/db.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable');\r\n}\r\n\r\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n  cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function connectDB() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n      maxPoolSize: 5, // Maintain up to 5 socket connections\r\n      serverSelectionTimeoutMS: 5000, // Keep trying to send operations for 5 seconds\r\n      socketTimeoutMS: 45000, // Close sockets after 45 seconds of inactivity\r\n      family: 4, // Use IPv4, skip trying IPv6\r\n    };\r\n\r\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\r\n      console.log('âœ… MongoDB Connected');\r\n      return mongoose;\r\n    });\r\n  }\r\n\r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\nexport default connectDB;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA;;;;CAIC,GACD,IAAI,SAAS,yDAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;YAChB,aAAa;YACb,0BAA0B;YAC1B,iBAAiB;YACjB,QAAQ;QACV;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///D:/BEDegree/5th-Sem/CC/PetAdopt/lib/models/User.js"],"sourcesContent":["import mongoose from 'mongoose';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, 'Please provide a name'],\r\n    trim: true,\r\n    maxlength: [50, 'Name cannot exceed 50 characters']\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: [true, 'Please provide an email'],\r\n    unique: true,\r\n    lowercase: true,\r\n    match: [/^\\S+@\\S+\\.\\S+$/, 'Please provide a valid email']\r\n  },\r\n  phone: {\r\n    type: String,\r\n    required: [true, 'Please provide a phone number'],\r\n    match: [/^[0-9]{10}$/, 'Please provide a valid 10-digit phone number']\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [true, 'Please provide a password'],\r\n    minlength: [6, 'Password must be at least 6 characters'],\r\n    select: false\r\n  },\r\n  role: {\r\n    type: String,\r\n    enum: ['user', 'admin'],\r\n    default: 'user'\r\n  },\r\n  location: {\r\n    city: { type: String, default: '' },\r\n    state: { type: String, default: '' }\r\n  },\r\n  avatar: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  favorites: [{\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'Pet'\r\n  }],\r\n  createdAt: {\r\n    type: Date,\r\n    default: Date.now\r\n  }\r\n});\r\n\r\n// Hash password before saving\r\nuserSchema.pre('save', async function(next) {\r\n  if (!this.isModified('password')) {\r\n    return next();\r\n  }\r\n  const salt = await bcrypt.genSalt(10);\r\n  this.password = await bcrypt.hash(this.password, salt);\r\n  next();\r\n});\r\n\r\n// Compare password method\r\nuserSchema.methods.comparePassword = async function(enteredPassword) {\r\n  return await bcrypt.compare(enteredPassword, this.password);\r\n};\r\n\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAwB;QACzC,MAAM;QACN,WAAW;YAAC;YAAI;SAAmC;IACrD;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,QAAQ;QACR,WAAW;QACX,OAAO;YAAC;YAAkB;SAA+B;IAC3D;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAAgC;QACjD,OAAO;YAAC;YAAe;SAA+C;IACxE;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;QAC7C,WAAW;YAAC;YAAG;SAAyC;QACxD,QAAQ;IACV;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAQ;SAAQ;QACvB,SAAS;IACX;IACA,UAAU;QACR,MAAM;YAAE,MAAM;YAAQ,SAAS;QAAG;QAClC,OAAO;YAAE,MAAM;YAAQ,SAAS;QAAG;IACrC;IACA,QAAQ;QACN,MAAM;QACN,SAAS;IACX;IACA,WAAW;QAAC;YACV,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;YACpC,KAAK;QACP;KAAE;IACF,WAAW;QACT,MAAM;QACN,SAAS,KAAK,GAAG;IACnB;AACF;AAEA,8BAA8B;AAC9B,WAAW,GAAG,CAAC,QAAQ,eAAe,IAAI;IACxC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa;QAChC,OAAO;IACT;IACA,MAAM,OAAO,MAAM,mMAAM,CAAC,OAAO,CAAC;IAClC,IAAI,CAAC,QAAQ,GAAG,MAAM,mMAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;IACjD;AACF;AAEA,0BAA0B;AAC1B,WAAW,OAAO,CAAC,eAAe,GAAG,eAAe,eAAe;IACjE,OAAO,MAAM,mMAAM,CAAC,OAAO,CAAC,iBAAiB,IAAI,CAAC,QAAQ;AAC5D;AAEA,MAAM,OAAO,oHAAQ,CAAC,KAAK,CAAC,QAAQ;uCACrB"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///D:/BEDegree/5th-Sem/CC/PetAdopt/lib/utils/generateToken.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\n\r\n// Generate Access Token\r\nexport const generateAccessToken = (id) => {\r\n  return jwt.sign({ id }, process.env.JWT_SECRET, {\r\n    expiresIn: process.env.JWT_EXPIRE\r\n  });\r\n};\r\n\r\n// Generate Refresh Token\r\nexport const generateRefreshToken = (id) => {\r\n  return jwt.sign({ id }, process.env.JWT_REFRESH_SECRET, {\r\n    expiresIn: process.env.JWT_REFRESH_EXPIRE\r\n  });\r\n};"],"names":[],"mappings":";;;;;;AAAA;;AAGO,MAAM,sBAAsB,CAAC;IAClC,OAAO,2MAAG,CAAC,IAAI,CAAC;QAAE;IAAG,GAAG,QAAQ,GAAG,CAAC,UAAU,EAAE;QAC9C,WAAW,QAAQ,GAAG,CAAC,UAAU;IACnC;AACF;AAGO,MAAM,uBAAuB,CAAC;IACnC,OAAO,2MAAG,CAAC,IAAI,CAAC;QAAE;IAAG,GAAG,QAAQ,GAAG,CAAC,kBAAkB,EAAE;QACtD,WAAW,QAAQ,GAAG,CAAC,kBAAkB;IAC3C;AACF"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///D:/BEDegree/5th-Sem/CC/PetAdopt/app/api/auth/login/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport connectDB from '@/lib/config/db';\r\nimport User from '@/lib/models/User';\r\nimport { generateAccessToken, generateRefreshToken } from '@/lib/utils/generateToken';\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    await connectDB();\r\n\r\n    const { email, password } = await request.json();\r\n\r\n    // Validate email & password\r\n    if (!email || !password) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: 'Please provide email and password'\r\n      }, { status: 400 });\r\n    }\r\n\r\n    // Check for user\r\n    const user = await User.findOne({ email }).select('+password');\r\n\r\n    if (!user) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: 'Invalid credentials'\r\n      }, { status: 401 });\r\n    }\r\n\r\n    // Check if password matches\r\n    const isMatch = await user.comparePassword(password);\r\n\r\n    if (!isMatch) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: 'Invalid credentials'\r\n      }, { status: 401 });\r\n    }\r\n\r\n    const accessToken = generateAccessToken(user._id);\r\n    const refreshToken = generateRefreshToken(user._id);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Login successful',\r\n      data: {\r\n        _id: user._id,\r\n        name: user.name,\r\n        email: user.email,\r\n        phone: user.phone,\r\n        role: user.role,\r\n        location: user.location,\r\n        avatar: user.avatar,\r\n        accessToken,\r\n        refreshToken\r\n      }\r\n    });\r\n  } catch (error) {\r\n    return NextResponse.json({\r\n      success: false,\r\n      message: error.message\r\n    }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,IAAA,gIAAS;QAEf,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,4BAA4B;QAC5B,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,iBAAiB;QACjB,MAAM,OAAO,MAAM,kIAAI,CAAC,OAAO,CAAC;YAAE;QAAM,GAAG,MAAM,CAAC;QAElD,IAAI,CAAC,MAAM;YACT,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,4BAA4B;QAC5B,MAAM,UAAU,MAAM,KAAK,eAAe,CAAC;QAE3C,IAAI,CAAC,SAAS;YACZ,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,MAAM,cAAc,IAAA,sJAAmB,EAAC,KAAK,GAAG;QAChD,MAAM,eAAe,IAAA,uJAAoB,EAAC,KAAK,GAAG;QAElD,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,MAAM;gBACJ,KAAK,KAAK,GAAG;gBACb,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;gBACjB,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;gBACf,UAAU,KAAK,QAAQ;gBACvB,QAAQ,KAAK,MAAM;gBACnB;gBACA;YACF;QACF;IACF,EAAE,OAAO,OAAO;QACd,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS,MAAM,OAAO;QACxB,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF"}}]
}